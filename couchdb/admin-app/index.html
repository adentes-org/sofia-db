<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SOFIA - Admin console</title>
    <link rel="stylesheet" type="text/css" href="lib%2fmilligram.min.css" />
    <link rel="stylesheet" type="text/css" href="lib%2ftrumbowyg%2fui%2ftrumbowyg.min.css" />
    <link rel="stylesheet" type="text/css" href="style.css"/>

    <!-- TODO upload to DB -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
    <!--  <script src="https://code.highcharts.com/modules/exporting.js"></script>  -->
  </head>
  <body>
    <h1>SOFIA - Admin console</h1>
    <div id="menu">
      <a class="button button-outline" id="configuration">Configuration</a>
      <a class="button button-outline" id="memo">Memo</a>
      <a class="button button-outline" id="teams">Teams</a>
      <a class="button button-outline" id="export" onclick="generateUsersData();">Export</a>
      <a class="button button-outline" id="conflict" onclick="getConflicts();">Conflicts</a>
      <a class="button button-outline" id="stat" onclick="getStats();">Stats</a>
    </div>
    <div class="page" id="stat">
        <h2>Stats</h2>
        <div id="stat_vue"></div>
    </div>
    <div class="page" id="configuration">
        <h2>Configuration</h2>
        <input disabled type="text" id="url" value="" style="width: 100%;">
        <div id="qrcode"></div>
    </div>
    <div class="page" id="memo">
      <h2>Memo edition</h2>
      <textarea></textarea>
      <button class="button-primary" onclick="updateMemo();" style="float: right;">Valider</button>
    </div>
    <div class="page" id="teams">
      <button class="button-primary float-right" onclick="updtUsersList();">Update team list in App</button>
      <h2>Team Management</h2>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Password</th>
            <th>Roles</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr id="add-user">
            <td><input type="text" id="name" placeholder="username" style="width: 240px;"></td>
            <td><input type="text" id="password" placeholder="password" style="width: 240px;"></td>
            <td></td>
            <td>
              <button class="button-primary" onclick="addUser();">Ajouter</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="page" id="export">
      <button class="button-primary float-right" onclick="generateUsersQRCode();">Generate QR-Codes</button>
      <button class="button-primary float-right" onclick="resetAllUsersPassword();" style="margin-right: 1rem;">Reset all password</button>
      <h2>Export</h2>
      <div id="table">
      </div>
    </div>
    <div class="page" id="conflict">
      <h2>Conflicts</h2>
      <button class="button-primary float-right" disabled="disabled" onclick="validateMerge();">Validate Merge</button>
	    <div id="editor-header" class="row" style="width: calc(100% - 2.2em);">
        <div class="column column-33">Source</div>
        <div class="column column-33">Conflict</div>
        <div class="column column-33">Result (editable) <div class="float-right"><button class="button button-small" onclick="showRaw()" disabled="disabled">raw</button> / <button onclick="showDiff()" class="button button-small">diff</button></div></div>
      </div>
	    <div id="editor" class="row" style="width: calc(100% - 2.2em);">
        <div id="src" class="column column-33"></div>
        <div id="conflict" class="column column-33"></div>
        <div id="result" class="column column-33">
          <div class="raw" contenteditable="true"></div>
          <div class="diffResult" style="display:none"></div>
        </div>
      </div>
      <hr>
	    <div id="conflicts"></div>
    </div>
  </body>
    <script src="lib%2fjquery-2.2.0.min.js"></script>
    <script src="lib%2fpouchdb-5.2.1.min.js"></script>
    <script src="lib%2fqrcode.min.js"></script>
    <script src="lib%2ftrumbowyg%2ftrumbowyg.min.js"></script>
    <script src="lib%2fobjectDiff.js"></script>
    <script src="script.js"></script>
</html>
